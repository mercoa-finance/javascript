/**
 * This file was auto-generated by Fern from our API Definition.
 */

import { mockServerPool } from "../../mock-server/MockServerPool";
import { MercoaClient } from "../../../src/Client";
import * as Mercoa from "../../../src/api/index";

describe("Organization", () => {
    test("get", async () => {
        const server = mockServerPool.createServer();
        const client = new MercoaClient({ token: "test", xApiVersion: "2024-08-01", environment: server.baseUrl });

        const rawResponseBody = {
            id: "id",
            sandbox: true,
            name: "name",
            logoUrl: "logoUrl",
            faviconUrl: "faviconUrl",
            websiteUrl: "websiteUrl",
            supportEmail: "supportEmail",
            paymentMethods: {
                payerPayments: [
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                ],
                backupDisbursements: [
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                ],
                vendorDisbursements: [
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                ],
            },
            emailProvider: {
                sender: { provider: "none", fromEmail: "fromEmail", fromName: "fromName", hasApiKey: true },
                inboxDomain: "inboxDomain",
                alternativeInboxDomains: ["alternativeInboxDomains", "alternativeInboxDomains"],
            },
            externalAccountingSystemProvider: { type: "none", hasApiKey: true },
            colorScheme: {
                primaryColor: "primaryColor",
                secondaryColor: "secondaryColor",
                logoBackgroundColor: "logoBackgroundColor",
                roundedCorners: 1,
                fontFamily: "fontFamily",
                fontSize: "fontSize",
            },
            payeeOnboardingOptions: {
                enableBusiness: true,
                enableIndividual: true,
                paymentMethod: true,
                business: {
                    type: { show: true, edit: true, required: true },
                    doingBusinessAs: { show: true, edit: true, required: true },
                    ein: { show: true, edit: true, required: true },
                    mcc: { show: true, edit: true, required: true },
                    formationDate: { show: true, edit: true, required: true },
                    website: { show: true, edit: true, required: true },
                    description: { show: true, edit: true, required: true },
                    representatives: { show: true, edit: true, required: true },
                    logo: { show: true, edit: true, required: true },
                    averageTransactionSize: { show: true, edit: true, required: true },
                    averageMonthlyTransactionVolume: { show: true, edit: true, required: true },
                    maxTransactionSize: { show: true, edit: true, required: true },
                    termsOfService: { show: true, edit: true, required: true },
                    email: { show: true, edit: true, required: true },
                    name: { show: true, edit: true, required: true },
                    address: { show: true, edit: true, required: true },
                    phone: { show: true, edit: true, required: true },
                    tenNinetyNine: { show: true, edit: true, required: true },
                    w9: { show: true, edit: true, required: true },
                    bankStatement: { show: true, edit: true, required: true },
                },
                individual: {
                    dateOfBirth: { show: true, edit: true, required: true },
                    ssn: { show: true, edit: true, required: true },
                    termsOfService: { show: true, edit: true, required: true },
                    email: { show: true, edit: true, required: true },
                    name: { show: true, edit: true, required: true },
                    address: { show: true, edit: true, required: true },
                    phone: { show: true, edit: true, required: true },
                    tenNinetyNine: { show: true, edit: true, required: true },
                    w9: { show: true, edit: true, required: true },
                    bankStatement: { show: true, edit: true, required: true },
                },
            },
            payorOnboardingOptions: {
                enableBusiness: true,
                enableIndividual: true,
                paymentMethod: true,
                business: {
                    type: { show: true, edit: true, required: true },
                    doingBusinessAs: { show: true, edit: true, required: true },
                    ein: { show: true, edit: true, required: true },
                    mcc: { show: true, edit: true, required: true },
                    formationDate: { show: true, edit: true, required: true },
                    website: { show: true, edit: true, required: true },
                    description: { show: true, edit: true, required: true },
                    representatives: { show: true, edit: true, required: true },
                    logo: { show: true, edit: true, required: true },
                    averageTransactionSize: { show: true, edit: true, required: true },
                    averageMonthlyTransactionVolume: { show: true, edit: true, required: true },
                    maxTransactionSize: { show: true, edit: true, required: true },
                    termsOfService: { show: true, edit: true, required: true },
                    email: { show: true, edit: true, required: true },
                    name: { show: true, edit: true, required: true },
                    address: { show: true, edit: true, required: true },
                    phone: { show: true, edit: true, required: true },
                    tenNinetyNine: { show: true, edit: true, required: true },
                    w9: { show: true, edit: true, required: true },
                    bankStatement: { show: true, edit: true, required: true },
                },
                individual: {
                    dateOfBirth: { show: true, edit: true, required: true },
                    ssn: { show: true, edit: true, required: true },
                    termsOfService: { show: true, edit: true, required: true },
                    email: { show: true, edit: true, required: true },
                    name: { show: true, edit: true, required: true },
                    address: { show: true, edit: true, required: true },
                    phone: { show: true, edit: true, required: true },
                    tenNinetyNine: { show: true, edit: true, required: true },
                    w9: { show: true, edit: true, required: true },
                    bankStatement: { show: true, edit: true, required: true },
                },
            },
            metadataSchema: [
                {
                    key: "key",
                    displayName: "displayName",
                    description: "description",
                    lineItem: true,
                    type: "STRING",
                    allowMultiple: true,
                    validationRules: { type: "regex", regex: "regex", errorMessage: "errorMessage" },
                    showConditions: {
                        alwaysHide: true,
                        hasOptions: true,
                        hasDocument: true,
                        hasNoLineItems: true,
                        paymentSourceTypes: ["custom", "custom"],
                        paymentSourceCustomSchemaIds: ["paymentSourceCustomSchemaIds", "paymentSourceCustomSchemaIds"],
                        paymentDestinationTypes: ["custom", "custom"],
                        paymentDestinationCustomSchemaIds: [
                            "paymentDestinationCustomSchemaIds",
                            "paymentDestinationCustomSchemaIds",
                        ],
                    },
                    ocrRules: { extractFromDocument: true, predictFromHistory: true },
                },
                {
                    key: "key",
                    displayName: "displayName",
                    description: "description",
                    lineItem: true,
                    type: "STRING",
                    allowMultiple: true,
                    validationRules: { type: "regex", regex: "regex", errorMessage: "errorMessage" },
                    showConditions: {
                        alwaysHide: true,
                        hasOptions: true,
                        hasDocument: true,
                        hasNoLineItems: true,
                        paymentSourceTypes: ["custom", "custom"],
                        paymentSourceCustomSchemaIds: ["paymentSourceCustomSchemaIds", "paymentSourceCustomSchemaIds"],
                        paymentDestinationTypes: ["custom", "custom"],
                        paymentDestinationCustomSchemaIds: [
                            "paymentDestinationCustomSchemaIds",
                            "paymentDestinationCustomSchemaIds",
                        ],
                    },
                    ocrRules: { extractFromDocument: true, predictFromHistory: true },
                },
            ],
            notificationEmailTemplate: {
                backgroundStyle: "backgroundStyle",
                header: "header",
                body: "body",
                signature: "signature",
                footer: "footer",
                button: "button",
            },
            customDomains: ["customDomains", "customDomains"],
            organizationEntityId: "organizationEntityId",
            rolePermissions: { rolePermissions: ["invoice.all", "invoice.all"] },
            notificationsDisabled: true,
        };
        server.mockEndpoint().get("/organization").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.organization.get();
        expect(response).toEqual({
            id: "id",
            sandbox: true,
            name: "name",
            logoUrl: "logoUrl",
            faviconUrl: "faviconUrl",
            websiteUrl: "websiteUrl",
            supportEmail: "supportEmail",
            paymentMethods: {
                payerPayments: [
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                ],
                backupDisbursements: [
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                ],
                vendorDisbursements: [
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                ],
            },
            emailProvider: {
                sender: {
                    provider: "none",
                    fromEmail: "fromEmail",
                    fromName: "fromName",
                    hasApiKey: true,
                },
                inboxDomain: "inboxDomain",
                alternativeInboxDomains: ["alternativeInboxDomains", "alternativeInboxDomains"],
            },
            externalAccountingSystemProvider: {
                type: "none",
                hasApiKey: true,
            },
            colorScheme: {
                primaryColor: "primaryColor",
                secondaryColor: "secondaryColor",
                logoBackgroundColor: "logoBackgroundColor",
                roundedCorners: 1,
                fontFamily: "fontFamily",
                fontSize: "fontSize",
            },
            payeeOnboardingOptions: {
                enableBusiness: true,
                enableIndividual: true,
                paymentMethod: true,
                business: {
                    type: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    doingBusinessAs: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    ein: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    mcc: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    formationDate: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    website: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    description: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    representatives: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    logo: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    averageTransactionSize: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    averageMonthlyTransactionVolume: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    maxTransactionSize: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    termsOfService: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    email: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    name: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    address: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    phone: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    tenNinetyNine: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    w9: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    bankStatement: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                },
                individual: {
                    dateOfBirth: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    ssn: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    termsOfService: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    email: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    name: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    address: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    phone: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    tenNinetyNine: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    w9: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    bankStatement: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                },
            },
            payorOnboardingOptions: {
                enableBusiness: true,
                enableIndividual: true,
                paymentMethod: true,
                business: {
                    type: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    doingBusinessAs: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    ein: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    mcc: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    formationDate: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    website: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    description: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    representatives: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    logo: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    averageTransactionSize: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    averageMonthlyTransactionVolume: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    maxTransactionSize: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    termsOfService: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    email: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    name: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    address: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    phone: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    tenNinetyNine: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    w9: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    bankStatement: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                },
                individual: {
                    dateOfBirth: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    ssn: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    termsOfService: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    email: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    name: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    address: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    phone: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    tenNinetyNine: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    w9: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    bankStatement: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                },
            },
            metadataSchema: [
                {
                    key: "key",
                    displayName: "displayName",
                    description: "description",
                    lineItem: true,
                    type: "STRING",
                    allowMultiple: true,
                    validationRules: {
                        type: "regex",
                        regex: "regex",
                        errorMessage: "errorMessage",
                    },
                    showConditions: {
                        alwaysHide: true,
                        hasOptions: true,
                        hasDocument: true,
                        hasNoLineItems: true,
                        paymentSourceTypes: ["custom", "custom"],
                        paymentSourceCustomSchemaIds: ["paymentSourceCustomSchemaIds", "paymentSourceCustomSchemaIds"],
                        paymentDestinationTypes: ["custom", "custom"],
                        paymentDestinationCustomSchemaIds: [
                            "paymentDestinationCustomSchemaIds",
                            "paymentDestinationCustomSchemaIds",
                        ],
                    },
                    ocrRules: {
                        extractFromDocument: true,
                        predictFromHistory: true,
                    },
                },
                {
                    key: "key",
                    displayName: "displayName",
                    description: "description",
                    lineItem: true,
                    type: "STRING",
                    allowMultiple: true,
                    validationRules: {
                        type: "regex",
                        regex: "regex",
                        errorMessage: "errorMessage",
                    },
                    showConditions: {
                        alwaysHide: true,
                        hasOptions: true,
                        hasDocument: true,
                        hasNoLineItems: true,
                        paymentSourceTypes: ["custom", "custom"],
                        paymentSourceCustomSchemaIds: ["paymentSourceCustomSchemaIds", "paymentSourceCustomSchemaIds"],
                        paymentDestinationTypes: ["custom", "custom"],
                        paymentDestinationCustomSchemaIds: [
                            "paymentDestinationCustomSchemaIds",
                            "paymentDestinationCustomSchemaIds",
                        ],
                    },
                    ocrRules: {
                        extractFromDocument: true,
                        predictFromHistory: true,
                    },
                },
            ],
            notificationEmailTemplate: {
                backgroundStyle: "backgroundStyle",
                header: "header",
                body: "body",
                signature: "signature",
                footer: "footer",
                button: "button",
            },
            customDomains: ["customDomains", "customDomains"],
            organizationEntityId: "organizationEntityId",
            rolePermissions: {
                rolePermissions: ["invoice.all", "invoice.all"],
            },
            notificationsDisabled: true,
        });
    });

    test("update", async () => {
        const server = mockServerPool.createServer();
        const client = new MercoaClient({ token: "test", xApiVersion: "2024-08-01", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = {
            id: "id",
            sandbox: true,
            name: "name",
            logoUrl: "logoUrl",
            faviconUrl: "faviconUrl",
            websiteUrl: "websiteUrl",
            supportEmail: "supportEmail",
            paymentMethods: {
                payerPayments: [
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                ],
                backupDisbursements: [
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                ],
                vendorDisbursements: [
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                ],
            },
            emailProvider: {
                sender: { provider: "none", fromEmail: "fromEmail", fromName: "fromName", hasApiKey: true },
                inboxDomain: "inboxDomain",
                alternativeInboxDomains: ["alternativeInboxDomains", "alternativeInboxDomains"],
            },
            externalAccountingSystemProvider: { type: "none", hasApiKey: true },
            colorScheme: {
                primaryColor: "primaryColor",
                secondaryColor: "secondaryColor",
                logoBackgroundColor: "logoBackgroundColor",
                roundedCorners: 1,
                fontFamily: "fontFamily",
                fontSize: "fontSize",
            },
            payeeOnboardingOptions: {
                enableBusiness: true,
                enableIndividual: true,
                paymentMethod: true,
                business: {
                    type: { show: true, edit: true, required: true },
                    doingBusinessAs: { show: true, edit: true, required: true },
                    ein: { show: true, edit: true, required: true },
                    mcc: { show: true, edit: true, required: true },
                    formationDate: { show: true, edit: true, required: true },
                    website: { show: true, edit: true, required: true },
                    description: { show: true, edit: true, required: true },
                    representatives: { show: true, edit: true, required: true },
                    logo: { show: true, edit: true, required: true },
                    averageTransactionSize: { show: true, edit: true, required: true },
                    averageMonthlyTransactionVolume: { show: true, edit: true, required: true },
                    maxTransactionSize: { show: true, edit: true, required: true },
                    termsOfService: { show: true, edit: true, required: true },
                    email: { show: true, edit: true, required: true },
                    name: { show: true, edit: true, required: true },
                    address: { show: true, edit: true, required: true },
                    phone: { show: true, edit: true, required: true },
                    tenNinetyNine: { show: true, edit: true, required: true },
                    w9: { show: true, edit: true, required: true },
                    bankStatement: { show: true, edit: true, required: true },
                },
                individual: {
                    dateOfBirth: { show: true, edit: true, required: true },
                    ssn: { show: true, edit: true, required: true },
                    termsOfService: { show: true, edit: true, required: true },
                    email: { show: true, edit: true, required: true },
                    name: { show: true, edit: true, required: true },
                    address: { show: true, edit: true, required: true },
                    phone: { show: true, edit: true, required: true },
                    tenNinetyNine: { show: true, edit: true, required: true },
                    w9: { show: true, edit: true, required: true },
                    bankStatement: { show: true, edit: true, required: true },
                },
            },
            payorOnboardingOptions: {
                enableBusiness: true,
                enableIndividual: true,
                paymentMethod: true,
                business: {
                    type: { show: true, edit: true, required: true },
                    doingBusinessAs: { show: true, edit: true, required: true },
                    ein: { show: true, edit: true, required: true },
                    mcc: { show: true, edit: true, required: true },
                    formationDate: { show: true, edit: true, required: true },
                    website: { show: true, edit: true, required: true },
                    description: { show: true, edit: true, required: true },
                    representatives: { show: true, edit: true, required: true },
                    logo: { show: true, edit: true, required: true },
                    averageTransactionSize: { show: true, edit: true, required: true },
                    averageMonthlyTransactionVolume: { show: true, edit: true, required: true },
                    maxTransactionSize: { show: true, edit: true, required: true },
                    termsOfService: { show: true, edit: true, required: true },
                    email: { show: true, edit: true, required: true },
                    name: { show: true, edit: true, required: true },
                    address: { show: true, edit: true, required: true },
                    phone: { show: true, edit: true, required: true },
                    tenNinetyNine: { show: true, edit: true, required: true },
                    w9: { show: true, edit: true, required: true },
                    bankStatement: { show: true, edit: true, required: true },
                },
                individual: {
                    dateOfBirth: { show: true, edit: true, required: true },
                    ssn: { show: true, edit: true, required: true },
                    termsOfService: { show: true, edit: true, required: true },
                    email: { show: true, edit: true, required: true },
                    name: { show: true, edit: true, required: true },
                    address: { show: true, edit: true, required: true },
                    phone: { show: true, edit: true, required: true },
                    tenNinetyNine: { show: true, edit: true, required: true },
                    w9: { show: true, edit: true, required: true },
                    bankStatement: { show: true, edit: true, required: true },
                },
            },
            metadataSchema: [
                {
                    key: "key",
                    displayName: "displayName",
                    description: "description",
                    lineItem: true,
                    type: "STRING",
                    allowMultiple: true,
                    validationRules: { type: "regex", regex: "regex", errorMessage: "errorMessage" },
                    showConditions: {
                        alwaysHide: true,
                        hasOptions: true,
                        hasDocument: true,
                        hasNoLineItems: true,
                        paymentSourceTypes: ["custom", "custom"],
                        paymentSourceCustomSchemaIds: ["paymentSourceCustomSchemaIds", "paymentSourceCustomSchemaIds"],
                        paymentDestinationTypes: ["custom", "custom"],
                        paymentDestinationCustomSchemaIds: [
                            "paymentDestinationCustomSchemaIds",
                            "paymentDestinationCustomSchemaIds",
                        ],
                    },
                    ocrRules: { extractFromDocument: true, predictFromHistory: true },
                },
                {
                    key: "key",
                    displayName: "displayName",
                    description: "description",
                    lineItem: true,
                    type: "STRING",
                    allowMultiple: true,
                    validationRules: { type: "regex", regex: "regex", errorMessage: "errorMessage" },
                    showConditions: {
                        alwaysHide: true,
                        hasOptions: true,
                        hasDocument: true,
                        hasNoLineItems: true,
                        paymentSourceTypes: ["custom", "custom"],
                        paymentSourceCustomSchemaIds: ["paymentSourceCustomSchemaIds", "paymentSourceCustomSchemaIds"],
                        paymentDestinationTypes: ["custom", "custom"],
                        paymentDestinationCustomSchemaIds: [
                            "paymentDestinationCustomSchemaIds",
                            "paymentDestinationCustomSchemaIds",
                        ],
                    },
                    ocrRules: { extractFromDocument: true, predictFromHistory: true },
                },
            ],
            notificationEmailTemplate: {
                backgroundStyle: "backgroundStyle",
                header: "header",
                body: "body",
                signature: "signature",
                footer: "footer",
                button: "button",
            },
            customDomains: ["customDomains", "customDomains"],
            organizationEntityId: "organizationEntityId",
            rolePermissions: { rolePermissions: ["invoice.all", "invoice.all"] },
            notificationsDisabled: true,
        };
        server
            .mockEndpoint()
            .post("/organization")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.organization.update({});
        expect(response).toEqual({
            id: "id",
            sandbox: true,
            name: "name",
            logoUrl: "logoUrl",
            faviconUrl: "faviconUrl",
            websiteUrl: "websiteUrl",
            supportEmail: "supportEmail",
            paymentMethods: {
                payerPayments: [
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                ],
                backupDisbursements: [
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                ],
                vendorDisbursements: [
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                    {
                        type: "bankAccount",
                        availableDeliveryMethods: ["ACH_STANDARD", "ACH_STANDARD"],
                        defaultDeliveryMethod: "ACH_STANDARD",
                        name: "name",
                        active: true,
                    },
                ],
            },
            emailProvider: {
                sender: {
                    provider: "none",
                    fromEmail: "fromEmail",
                    fromName: "fromName",
                    hasApiKey: true,
                },
                inboxDomain: "inboxDomain",
                alternativeInboxDomains: ["alternativeInboxDomains", "alternativeInboxDomains"],
            },
            externalAccountingSystemProvider: {
                type: "none",
                hasApiKey: true,
            },
            colorScheme: {
                primaryColor: "primaryColor",
                secondaryColor: "secondaryColor",
                logoBackgroundColor: "logoBackgroundColor",
                roundedCorners: 1,
                fontFamily: "fontFamily",
                fontSize: "fontSize",
            },
            payeeOnboardingOptions: {
                enableBusiness: true,
                enableIndividual: true,
                paymentMethod: true,
                business: {
                    type: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    doingBusinessAs: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    ein: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    mcc: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    formationDate: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    website: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    description: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    representatives: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    logo: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    averageTransactionSize: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    averageMonthlyTransactionVolume: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    maxTransactionSize: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    termsOfService: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    email: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    name: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    address: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    phone: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    tenNinetyNine: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    w9: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    bankStatement: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                },
                individual: {
                    dateOfBirth: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    ssn: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    termsOfService: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    email: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    name: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    address: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    phone: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    tenNinetyNine: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    w9: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    bankStatement: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                },
            },
            payorOnboardingOptions: {
                enableBusiness: true,
                enableIndividual: true,
                paymentMethod: true,
                business: {
                    type: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    doingBusinessAs: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    ein: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    mcc: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    formationDate: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    website: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    description: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    representatives: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    logo: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    averageTransactionSize: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    averageMonthlyTransactionVolume: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    maxTransactionSize: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    termsOfService: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    email: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    name: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    address: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    phone: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    tenNinetyNine: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    w9: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    bankStatement: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                },
                individual: {
                    dateOfBirth: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    ssn: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    termsOfService: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    email: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    name: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    address: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    phone: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    tenNinetyNine: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    w9: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                    bankStatement: {
                        show: true,
                        edit: true,
                        required: true,
                    },
                },
            },
            metadataSchema: [
                {
                    key: "key",
                    displayName: "displayName",
                    description: "description",
                    lineItem: true,
                    type: "STRING",
                    allowMultiple: true,
                    validationRules: {
                        type: "regex",
                        regex: "regex",
                        errorMessage: "errorMessage",
                    },
                    showConditions: {
                        alwaysHide: true,
                        hasOptions: true,
                        hasDocument: true,
                        hasNoLineItems: true,
                        paymentSourceTypes: ["custom", "custom"],
                        paymentSourceCustomSchemaIds: ["paymentSourceCustomSchemaIds", "paymentSourceCustomSchemaIds"],
                        paymentDestinationTypes: ["custom", "custom"],
                        paymentDestinationCustomSchemaIds: [
                            "paymentDestinationCustomSchemaIds",
                            "paymentDestinationCustomSchemaIds",
                        ],
                    },
                    ocrRules: {
                        extractFromDocument: true,
                        predictFromHistory: true,
                    },
                },
                {
                    key: "key",
                    displayName: "displayName",
                    description: "description",
                    lineItem: true,
                    type: "STRING",
                    allowMultiple: true,
                    validationRules: {
                        type: "regex",
                        regex: "regex",
                        errorMessage: "errorMessage",
                    },
                    showConditions: {
                        alwaysHide: true,
                        hasOptions: true,
                        hasDocument: true,
                        hasNoLineItems: true,
                        paymentSourceTypes: ["custom", "custom"],
                        paymentSourceCustomSchemaIds: ["paymentSourceCustomSchemaIds", "paymentSourceCustomSchemaIds"],
                        paymentDestinationTypes: ["custom", "custom"],
                        paymentDestinationCustomSchemaIds: [
                            "paymentDestinationCustomSchemaIds",
                            "paymentDestinationCustomSchemaIds",
                        ],
                    },
                    ocrRules: {
                        extractFromDocument: true,
                        predictFromHistory: true,
                    },
                },
            ],
            notificationEmailTemplate: {
                backgroundStyle: "backgroundStyle",
                header: "header",
                body: "body",
                signature: "signature",
                footer: "footer",
                button: "button",
            },
            customDomains: ["customDomains", "customDomains"],
            organizationEntityId: "organizationEntityId",
            rolePermissions: {
                rolePermissions: ["invoice.all", "invoice.all"],
            },
            notificationsDisabled: true,
        });
    });

    test("emailLog", async () => {
        const server = mockServerPool.createServer();
        const client = new MercoaClient({ token: "test", xApiVersion: "2024-08-01", environment: server.baseUrl });

        const rawResponseBody = {
            count: 1,
            hasMore: true,
            data: [
                {
                    id: "id",
                    status: "PENDING",
                    subject: "subject",
                    from: "from",
                    to: "to",
                    htmlBody: "htmlBody",
                    textBody: "textBody",
                    attachment: { filename: "filename", contentType: "contentType" },
                    createdAt: "2024-01-15T09:30:00Z",
                    invoiceId: "invoiceId",
                },
                {
                    id: "id",
                    status: "PENDING",
                    subject: "subject",
                    from: "from",
                    to: "to",
                    htmlBody: "htmlBody",
                    textBody: "textBody",
                    attachment: { filename: "filename", contentType: "contentType" },
                    createdAt: "2024-01-15T09:30:00Z",
                    invoiceId: "invoiceId",
                },
            ],
        };
        server
            .mockEndpoint()
            .get("/organization/emailLog")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.organization.emailLog();
        expect(response).toEqual({
            count: 1,
            hasMore: true,
            data: [
                {
                    id: "id",
                    status: "PENDING",
                    subject: "subject",
                    from: "from",
                    to: "to",
                    htmlBody: "htmlBody",
                    textBody: "textBody",
                    attachment: {
                        filename: "filename",
                        contentType: "contentType",
                    },
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    invoiceId: "invoiceId",
                },
                {
                    id: "id",
                    status: "PENDING",
                    subject: "subject",
                    from: "from",
                    to: "to",
                    htmlBody: "htmlBody",
                    textBody: "textBody",
                    attachment: {
                        filename: "filename",
                        contentType: "contentType",
                    },
                    createdAt: new Date("2024-01-15T09:30:00.000Z"),
                    invoiceId: "invoiceId",
                },
            ],
        });
    });

    test("invalidateTokens", async () => {
        const server = mockServerPool.createServer();
        const client = new MercoaClient({ token: "test", xApiVersion: "2024-08-01", environment: server.baseUrl });
        const rawRequestBody = { sessionId: ["session_123", "session_456"] };

        server
            .mockEndpoint()
            .post("/organization/invalidateTokens")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.organization.invalidateTokens({
            sessionId: ["session_123", "session_456"],
        });
        expect(response).toEqual(undefined);
    });
});
