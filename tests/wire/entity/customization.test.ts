/**
 * This file was auto-generated by Fern from our API Definition.
 */

import { mockServerPool } from "../../mock-server/MockServerPool";
import { MercoaClient } from "../../../src/Client";

describe("Customization", () => {
    test("get", async () => {
        const server = mockServerPool.createServer();
        const client = new MercoaClient({ token: "test", xApiVersion: "2024-08-01", environment: server.baseUrl });

        const rawResponseBody = {
            metadata: [
                { key: "my_custom_field", disabled: true },
                { key: "my_other_field", disabled: false },
            ],
            paymentSource: [
                { type: "bankAccount", disabled: true, defaultDeliveryMethod: "ACH_SAME_DAY" },
                { type: "custom", schemaId: "cpms_7df2974a-4069-454c-912f-7e58ebe030fb", disabled: true },
            ],
            backupDisbursement: [
                { type: "check", disabled: true, defaultDeliveryMethod: "MAIL", printDescription: true },
            ],
            paymentDestination: [
                { type: "bankAccount", disabled: true, defaultDeliveryMethod: "ACH_SAME_DAY" },
                { type: "check", disabled: true, defaultDeliveryMethod: "MAIL", printDescription: true },
            ],
            ocr: {
                lineItems: true,
                collapseLineItems: true,
                invoiceMetadata: true,
                lineItemMetadata: true,
                lineItemGlAccountId: true,
                predictMetadata: true,
                taxAndShippingAsLineItems: true,
                splitDocuments: true,
            },
            notifications: { assumeRole: "admin" },
            workflow: { autoAdvanceInvoiceStatus: true },
            invoice: { hideAddress: false, hideQrCode: false, hideBankDetails: false, hidePaymentLink: false },
            rolePermissions: { admin: ["invoice.all", "paymentMethod.all"] },
            fees: {
                payable: {
                    source: {
                        ACH_STANDARD: { type: "flat", amount: 2.5 },
                        ACH_SAME_DAY: { type: "percentage", amount: 2.5 },
                        CHECK_PRINT: { type: "flat", amount: 2.5 },
                        CHECK_MAIL: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_PRIORITY: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_UPS_NEXT_DAY: { type: "flat", amount: 2.5 },
                    },
                    destination: {
                        ACH_STANDARD: { type: "flat", amount: 2.5 },
                        ACH_SAME_DAY: { type: "percentage", amount: 2.5 },
                        CHECK_PRINT: { type: "flat", amount: 2.5 },
                        CHECK_MAIL: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_PRIORITY: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_UPS_NEXT_DAY: { type: "flat", amount: 2.5 },
                    },
                },
                receivable: {
                    source: {
                        ACH_STANDARD: { type: "flat", amount: 2.5 },
                        ACH_SAME_DAY: { type: "percentage", amount: 2.5 },
                        CHECK_PRINT: { type: "flat", amount: 2.5 },
                        CHECK_MAIL: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_PRIORITY: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_UPS_NEXT_DAY: { type: "flat", amount: 2.5 },
                    },
                    destination: {
                        ACH_STANDARD: { type: "flat", amount: 2.5 },
                        ACH_SAME_DAY: { type: "percentage", amount: 2.5 },
                        CHECK_PRINT: { type: "flat", amount: 2.5 },
                        CHECK_MAIL: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_PRIORITY: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_UPS_NEXT_DAY: { type: "flat", amount: 2.5 },
                    },
                },
            },
        };
        server
            .mockEndpoint()
            .get("/entity/ent_a0f6ea94-0761-4a5e-a416-3c453cb7eced/customization")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.entity.customization.get("ent_a0f6ea94-0761-4a5e-a416-3c453cb7eced");
        expect(response).toEqual({
            metadata: [
                {
                    key: "my_custom_field",
                    disabled: true,
                },
                {
                    key: "my_other_field",
                    disabled: false,
                },
            ],
            paymentSource: [
                {
                    type: "bankAccount",
                    disabled: true,
                    defaultDeliveryMethod: "ACH_SAME_DAY",
                },
                {
                    type: "custom",
                    schemaId: "cpms_7df2974a-4069-454c-912f-7e58ebe030fb",
                    disabled: true,
                },
            ],
            backupDisbursement: [
                {
                    type: "check",
                    disabled: true,
                    defaultDeliveryMethod: "MAIL",
                    printDescription: true,
                },
            ],
            paymentDestination: [
                {
                    type: "bankAccount",
                    disabled: true,
                    defaultDeliveryMethod: "ACH_SAME_DAY",
                },
                {
                    type: "check",
                    disabled: true,
                    defaultDeliveryMethod: "MAIL",
                    printDescription: true,
                },
            ],
            ocr: {
                lineItems: true,
                collapseLineItems: true,
                invoiceMetadata: true,
                lineItemMetadata: true,
                lineItemGlAccountId: true,
                predictMetadata: true,
                taxAndShippingAsLineItems: true,
                splitDocuments: true,
            },
            notifications: {
                assumeRole: "admin",
            },
            workflow: {
                autoAdvanceInvoiceStatus: true,
            },
            invoice: {
                hideAddress: false,
                hideQrCode: false,
                hideBankDetails: false,
                hidePaymentLink: false,
            },
            rolePermissions: {
                admin: ["invoice.all", "paymentMethod.all"],
            },
            fees: {
                payable: {
                    source: {
                        achStandard: {
                            type: "flat",
                            amount: 2.5,
                        },
                        achSameDay: {
                            type: "percentage",
                            amount: 2.5,
                        },
                        checkPrint: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMail: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailPriority: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailUpsNextDay: {
                            type: "flat",
                            amount: 2.5,
                        },
                    },
                    destination: {
                        achStandard: {
                            type: "flat",
                            amount: 2.5,
                        },
                        achSameDay: {
                            type: "percentage",
                            amount: 2.5,
                        },
                        checkPrint: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMail: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailPriority: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailUpsNextDay: {
                            type: "flat",
                            amount: 2.5,
                        },
                    },
                },
                receivable: {
                    source: {
                        achStandard: {
                            type: "flat",
                            amount: 2.5,
                        },
                        achSameDay: {
                            type: "percentage",
                            amount: 2.5,
                        },
                        checkPrint: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMail: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailPriority: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailUpsNextDay: {
                            type: "flat",
                            amount: 2.5,
                        },
                    },
                    destination: {
                        achStandard: {
                            type: "flat",
                            amount: 2.5,
                        },
                        achSameDay: {
                            type: "percentage",
                            amount: 2.5,
                        },
                        checkPrint: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMail: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailPriority: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailUpsNextDay: {
                            type: "flat",
                            amount: 2.5,
                        },
                    },
                },
            },
        });
    });

    test("update", async () => {
        const server = mockServerPool.createServer();
        const client = new MercoaClient({ token: "test", xApiVersion: "2024-08-01", environment: server.baseUrl });
        const rawRequestBody = {
            metadata: [
                { key: "my_custom_field", disabled: true },
                { key: "my_other_field", disabled: false },
            ],
            paymentSource: [
                { type: "bankAccount", disabled: true, defaultDeliveryMethod: "ACH_SAME_DAY" },
                { type: "custom", schemaId: "cpms_7df2974a-4069-454c-912f-7e58ebe030fb", disabled: true },
            ],
            backupDisbursement: [
                { type: "check", disabled: true, defaultDeliveryMethod: "MAIL", printDescription: true },
            ],
            paymentDestination: [
                { type: "bankAccount", disabled: true, defaultDeliveryMethod: "ACH_SAME_DAY" },
                { type: "check", disabled: true, defaultDeliveryMethod: "MAIL", printDescription: true },
            ],
            ocr: {
                lineItems: true,
                collapseLineItems: true,
                invoiceMetadata: true,
                lineItemMetadata: true,
                lineItemGlAccountId: true,
                predictMetadata: true,
                taxAndShippingAsLineItems: true,
                splitDocuments: true,
            },
            notifications: { assumeRole: "admin" },
            workflow: { autoAdvanceInvoiceStatus: true },
            invoice: { hideAddress: false, hideQrCode: false, hideBankDetails: false, hidePaymentLink: false },
            rolePermissions: { admin: ["invoice.all", "paymentMethod.all"] },
            fees: {
                payable: {
                    source: {
                        ACH_STANDARD: { type: "flat", amount: 2.5 },
                        ACH_SAME_DAY: { type: "percentage", amount: 2.5 },
                        CHECK_PRINT: { type: "flat", amount: 2.5 },
                        CHECK_MAIL: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_PRIORITY: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_UPS_NEXT_DAY: { type: "flat", amount: 2.5 },
                    },
                    destination: {
                        ACH_STANDARD: { type: "flat", amount: 2.5 },
                        ACH_SAME_DAY: { type: "percentage", amount: 2.5 },
                        CHECK_PRINT: { type: "flat", amount: 2.5 },
                        CHECK_MAIL: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_PRIORITY: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_UPS_NEXT_DAY: { type: "flat", amount: 2.5 },
                    },
                },
                receivable: {
                    source: {
                        ACH_STANDARD: { type: "flat", amount: 2.5 },
                        ACH_SAME_DAY: { type: "percentage", amount: 2.5 },
                        CHECK_PRINT: { type: "flat", amount: 2.5 },
                        CHECK_MAIL: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_PRIORITY: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_UPS_NEXT_DAY: { type: "flat", amount: 2.5 },
                    },
                    destination: {
                        ACH_STANDARD: { type: "flat", amount: 2.5 },
                        ACH_SAME_DAY: { type: "percentage", amount: 2.5 },
                        CHECK_PRINT: { type: "flat", amount: 2.5 },
                        CHECK_MAIL: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_PRIORITY: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_UPS_NEXT_DAY: { type: "flat", amount: 2.5 },
                    },
                },
            },
        };
        const rawResponseBody = {
            metadata: [
                { key: "my_custom_field", disabled: true },
                { key: "my_other_field", disabled: false },
            ],
            paymentSource: [
                { type: "bankAccount", disabled: true, defaultDeliveryMethod: "ACH_SAME_DAY" },
                { type: "custom", schemaId: "cpms_7df2974a-4069-454c-912f-7e58ebe030fb", disabled: true },
            ],
            backupDisbursement: [
                { type: "check", disabled: true, defaultDeliveryMethod: "MAIL", printDescription: true },
            ],
            paymentDestination: [
                { type: "bankAccount", disabled: true, defaultDeliveryMethod: "ACH_SAME_DAY" },
                { type: "check", disabled: true, defaultDeliveryMethod: "MAIL", printDescription: true },
            ],
            ocr: {
                lineItems: true,
                collapseLineItems: true,
                invoiceMetadata: true,
                lineItemMetadata: true,
                lineItemGlAccountId: true,
                predictMetadata: true,
                taxAndShippingAsLineItems: true,
                splitDocuments: true,
            },
            notifications: { assumeRole: "admin" },
            workflow: { autoAdvanceInvoiceStatus: true },
            invoice: { hideAddress: false, hideQrCode: false, hideBankDetails: false, hidePaymentLink: false },
            rolePermissions: { admin: ["invoice.all", "paymentMethod.all"] },
            fees: {
                payable: {
                    source: {
                        ACH_STANDARD: { type: "flat", amount: 2.5 },
                        ACH_SAME_DAY: { type: "percentage", amount: 2.5 },
                        CHECK_PRINT: { type: "flat", amount: 2.5 },
                        CHECK_MAIL: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_PRIORITY: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_UPS_NEXT_DAY: { type: "flat", amount: 2.5 },
                    },
                    destination: {
                        ACH_STANDARD: { type: "flat", amount: 2.5 },
                        ACH_SAME_DAY: { type: "percentage", amount: 2.5 },
                        CHECK_PRINT: { type: "flat", amount: 2.5 },
                        CHECK_MAIL: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_PRIORITY: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_UPS_NEXT_DAY: { type: "flat", amount: 2.5 },
                    },
                },
                receivable: {
                    source: {
                        ACH_STANDARD: { type: "flat", amount: 2.5 },
                        ACH_SAME_DAY: { type: "percentage", amount: 2.5 },
                        CHECK_PRINT: { type: "flat", amount: 2.5 },
                        CHECK_MAIL: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_PRIORITY: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_UPS_NEXT_DAY: { type: "flat", amount: 2.5 },
                    },
                    destination: {
                        ACH_STANDARD: { type: "flat", amount: 2.5 },
                        ACH_SAME_DAY: { type: "percentage", amount: 2.5 },
                        CHECK_PRINT: { type: "flat", amount: 2.5 },
                        CHECK_MAIL: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_PRIORITY: { type: "flat", amount: 2.5 },
                        CHECK_MAIL_UPS_NEXT_DAY: { type: "flat", amount: 2.5 },
                    },
                },
            },
        };
        server
            .mockEndpoint()
            .post("/entity/ent_a0f6ea94-0761-4a5e-a416-3c453cb7eced/customization")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.entity.customization.update("ent_a0f6ea94-0761-4a5e-a416-3c453cb7eced", {
            metadata: [
                {
                    key: "my_custom_field",
                    disabled: true,
                },
                {
                    key: "my_other_field",
                    disabled: false,
                },
            ],
            paymentSource: [
                {
                    type: "bankAccount",
                    disabled: true,
                    defaultDeliveryMethod: "ACH_SAME_DAY",
                },
                {
                    type: "custom",
                    schemaId: "cpms_7df2974a-4069-454c-912f-7e58ebe030fb",
                    disabled: true,
                },
            ],
            backupDisbursement: [
                {
                    type: "check",
                    disabled: true,
                    defaultDeliveryMethod: "MAIL",
                    printDescription: true,
                },
            ],
            paymentDestination: [
                {
                    type: "bankAccount",
                    disabled: true,
                    defaultDeliveryMethod: "ACH_SAME_DAY",
                },
                {
                    type: "check",
                    disabled: true,
                    defaultDeliveryMethod: "MAIL",
                    printDescription: true,
                },
            ],
            ocr: {
                lineItems: true,
                collapseLineItems: true,
                invoiceMetadata: true,
                lineItemMetadata: true,
                lineItemGlAccountId: true,
                predictMetadata: true,
                taxAndShippingAsLineItems: true,
                splitDocuments: true,
            },
            notifications: {
                assumeRole: "admin",
            },
            workflow: {
                autoAdvanceInvoiceStatus: true,
            },
            invoice: {
                hideAddress: false,
                hideQrCode: false,
                hideBankDetails: false,
                hidePaymentLink: false,
            },
            rolePermissions: {
                admin: ["invoice.all", "paymentMethod.all"],
            },
            fees: {
                payable: {
                    source: {
                        achStandard: {
                            type: "flat",
                            amount: 2.5,
                        },
                        achSameDay: {
                            type: "percentage",
                            amount: 2.5,
                        },
                        checkPrint: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMail: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailPriority: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailUpsNextDay: {
                            type: "flat",
                            amount: 2.5,
                        },
                    },
                    destination: {
                        achStandard: {
                            type: "flat",
                            amount: 2.5,
                        },
                        achSameDay: {
                            type: "percentage",
                            amount: 2.5,
                        },
                        checkPrint: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMail: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailPriority: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailUpsNextDay: {
                            type: "flat",
                            amount: 2.5,
                        },
                    },
                },
                receivable: {
                    source: {
                        achStandard: {
                            type: "flat",
                            amount: 2.5,
                        },
                        achSameDay: {
                            type: "percentage",
                            amount: 2.5,
                        },
                        checkPrint: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMail: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailPriority: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailUpsNextDay: {
                            type: "flat",
                            amount: 2.5,
                        },
                    },
                    destination: {
                        achStandard: {
                            type: "flat",
                            amount: 2.5,
                        },
                        achSameDay: {
                            type: "percentage",
                            amount: 2.5,
                        },
                        checkPrint: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMail: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailPriority: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailUpsNextDay: {
                            type: "flat",
                            amount: 2.5,
                        },
                    },
                },
            },
        });
        expect(response).toEqual({
            metadata: [
                {
                    key: "my_custom_field",
                    disabled: true,
                },
                {
                    key: "my_other_field",
                    disabled: false,
                },
            ],
            paymentSource: [
                {
                    type: "bankAccount",
                    disabled: true,
                    defaultDeliveryMethod: "ACH_SAME_DAY",
                },
                {
                    type: "custom",
                    schemaId: "cpms_7df2974a-4069-454c-912f-7e58ebe030fb",
                    disabled: true,
                },
            ],
            backupDisbursement: [
                {
                    type: "check",
                    disabled: true,
                    defaultDeliveryMethod: "MAIL",
                    printDescription: true,
                },
            ],
            paymentDestination: [
                {
                    type: "bankAccount",
                    disabled: true,
                    defaultDeliveryMethod: "ACH_SAME_DAY",
                },
                {
                    type: "check",
                    disabled: true,
                    defaultDeliveryMethod: "MAIL",
                    printDescription: true,
                },
            ],
            ocr: {
                lineItems: true,
                collapseLineItems: true,
                invoiceMetadata: true,
                lineItemMetadata: true,
                lineItemGlAccountId: true,
                predictMetadata: true,
                taxAndShippingAsLineItems: true,
                splitDocuments: true,
            },
            notifications: {
                assumeRole: "admin",
            },
            workflow: {
                autoAdvanceInvoiceStatus: true,
            },
            invoice: {
                hideAddress: false,
                hideQrCode: false,
                hideBankDetails: false,
                hidePaymentLink: false,
            },
            rolePermissions: {
                admin: ["invoice.all", "paymentMethod.all"],
            },
            fees: {
                payable: {
                    source: {
                        achStandard: {
                            type: "flat",
                            amount: 2.5,
                        },
                        achSameDay: {
                            type: "percentage",
                            amount: 2.5,
                        },
                        checkPrint: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMail: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailPriority: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailUpsNextDay: {
                            type: "flat",
                            amount: 2.5,
                        },
                    },
                    destination: {
                        achStandard: {
                            type: "flat",
                            amount: 2.5,
                        },
                        achSameDay: {
                            type: "percentage",
                            amount: 2.5,
                        },
                        checkPrint: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMail: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailPriority: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailUpsNextDay: {
                            type: "flat",
                            amount: 2.5,
                        },
                    },
                },
                receivable: {
                    source: {
                        achStandard: {
                            type: "flat",
                            amount: 2.5,
                        },
                        achSameDay: {
                            type: "percentage",
                            amount: 2.5,
                        },
                        checkPrint: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMail: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailPriority: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailUpsNextDay: {
                            type: "flat",
                            amount: 2.5,
                        },
                    },
                    destination: {
                        achStandard: {
                            type: "flat",
                            amount: 2.5,
                        },
                        achSameDay: {
                            type: "percentage",
                            amount: 2.5,
                        },
                        checkPrint: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMail: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailPriority: {
                            type: "flat",
                            amount: 2.5,
                        },
                        checkMailUpsNextDay: {
                            type: "flat",
                            amount: 2.5,
                        },
                    },
                },
            },
        });
    });
});
